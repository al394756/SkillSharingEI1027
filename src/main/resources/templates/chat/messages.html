<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Skill Sharing -Chats</title>
    <meta charset="UTF-8" />
    <link href="../static/css/skillsharing.css" rel="stylesheet" th:href="@{/css/skillsharing.css}"/>
    <link href="../static/css/header.css" rel="stylesheet" th:href="@{/css/header.css}"/>
    <link href="../static/css/messages.css" rel="stylesheet" th:href="@{/css/messages.css}"/>
    <link href="../static/css/chat.css" rel="stylesheet" th:href="@{/css/chat.css}"/>
</head>
<div th:replace="fragments/header" ></div>

<body class="body2">
<main>
    <table>
        <tr>
            <td><div th:replace="chat/list" ></div></td>
            <td>
                <div class="aaaaa">
                <section class="chatbox">
                    <h1 class="username" th:text="${user2}"></h1>
                    <section class="chat-window">
                        <div th:each="message: ${messages}">
                            <div th:if=" ${session.user != null} and ${session.user.idStudent} != ${message.student}">
                                <article class="msg-container msg-remote" id="msg-0">
                                    <div class="msg-box">
                                        <div class="flr">
                                            <div class="messages">
                                                <p class="msg"th:text="${message.content}"></p>
                                            </div>
                                            <span class="timestamp">
                                    <span class="posttime" th:text="${message.date}"></span>
                                </span>
                                        </div>
                                    </div>
                                </article>
                            </div>
                            <div th:if=" ${session.user != null} and ${session.user.idStudent} == ${message.student}">
                                <article class="msg-container msg-self">
                                    <div class="msg-box">
                                        <div class="flr">
                                            <div class="messages">
                                                <p class="msg2"th:text="${message.content}"></p>
                                            </div>
                                            <span class="timestamp2">
                                    <span class="posttime" th:text="${message.date}"></span></span>
                                        </div>
                                    </div>
                                </article>
                            </div>
                        </div>
                    </section>
                    <form class="chat-input" action="#" th:action="@{/chat/messages}" th:object="${newMessage}" method="post">
                        <input type="text" autocomplete="on" placeholder="Type a message" th:field="*{content}">
                        <button>
                            <svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="rgba(0,0,0,.38)" d="M17,12L12,17V14H8V10H12V7L17,12M21,16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V7.5C3,7.12 3.21,6.79 3.53,6.62L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.79,6.79 21,7.12 21,7.5V16.5M12,4.15L5,8.09V15.91L12,19.85L19,15.91V8.09L12,4.15Z" /></svg>
                        </button>
                    </form>
                </section>
                </div>
            </td>
        </tr>
    </table>

</main>
</body>
</html>
